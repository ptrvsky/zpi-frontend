(this["webpackJsonpzpi-frontend"]=this["webpackJsonpzpi-frontend"]||[]).push([[0],{23:function(e,t,a){},52:function(e,t,a){},67:function(e,t,a){e.exports=a(92)},72:function(e,t,a){},78:function(e,t,a){},80:function(e,t,a){},81:function(e,t,a){},82:function(e,t,a){},83:function(e,t,a){},84:function(e,t,a){},85:function(e,t,a){},86:function(e,t,a){},87:function(e,t,a){},88:function(e,t,a){},89:function(e,t,a){},90:function(e,t,a){},91:function(e,t,a){},92:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(31),s=a.n(i),l=(a(72),a(10)),c=a(28),o=a(6),m=a(7),d=a(8),u=a(9),p=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(m.a)(a,[{key:"componentDidUpdate",value:function(e){this.props.location.pathname!==e.location.pathname&&window.scrollTo(0,0)}},{key:"render",value:function(){return null}}]),a}(r.a.Component),h=Object(c.e)(p),g=a(12),v=a(104),E=a(103),b=a(99),f=a(100),z=a(101),y=a(48),N=(a(78),function(e){var t=e.children;return Object(y.useMediaQuery)({minWidth:992})?t:null}),k=function(e){var t=e.children;return Object(y.useMediaQuery)({maxWidth:991})?t:null},w=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).state={user:{status:"NOT_LOGGED"}},n.handleLogout=n.handleLogout.bind(Object(g.a)(n)),n}return Object(m.a)(a,[{key:"componentDidMount",value:function(){localStorage.getItem("user")&&this.setState({user:JSON.parse(localStorage.getItem("user"))})}},{key:"handleLogout",value:function(){localStorage.removeItem("user"),this.setState({user:{status:"NOT_LOGGED"}})}},{key:"render",value:function(){return r.a.createElement("div",{className:"Navbar"},r.a.createElement("div",{className:"navbar-container"},r.a.createElement(v.a,{variant:"light",expand:"lg"},r.a.createElement(l.b,{to:"/"},r.a.createElement(v.a.Brand,null,r.a.createElement("div",{className:"logo-text d-inline-block align-top"},r.a.createElement("span",{className:"dark-gray"},r.a.createElement("span",{role:"img","aria-label":"logo"},"\ud83c\udf55")," Pizzeria"),r.a.createElement("span",{className:"red"}," Online")))),r.a.createElement(k,null,"LOGGED"===this.state.user.status?r.a.createElement(E.a,{alignRight:!0,title:r.a.createElement(b.a,null),className:"user-button-mobile ml-auto"},r.a.createElement("div",{className:"dropdown-item disabled"},this.state.user.mail),r.a.createElement(E.a.Divider,null),r.a.createElement(l.b,{to:"/orders",className:"dropdown-item"},"Zamowienia"),r.a.createElement(l.b,{to:"/cart",className:"dropdown-item"},"Koszyk"),r.a.createElement(l.b,{to:"/account",className:"dropdown-item"},"Dane konta"),r.a.createElement("div",{className:"dropdown-item",onClick:this.handleLogout},"Wyloguj")):r.a.createElement("div",{className:"buttons-mobile ml-auto"},r.a.createElement("div",{className:"shopping-cart"},r.a.createElement(l.b,{to:"/cart"},r.a.createElement(f.a,null))),r.a.createElement(l.b,{to:"/login"},r.a.createElement(z.a,null))),r.a.createElement(v.a.Toggle,null),r.a.createElement(v.a.Collapse,{className:"links"},r.a.createElement(l.b,{to:"/menu",className:"nav-link"},"Menu"),r.a.createElement(l.b,{to:"/about",className:"nav-link"},"O nas"),r.a.createElement(l.b,{to:"/contact",className:"nav-link"},"Kontakt"))),r.a.createElement(N,null,r.a.createElement("div",{className:"desktop-links"},r.a.createElement(l.b,{to:"/menu",className:"nav-link-padding"},"Menu"),r.a.createElement(l.b,{to:"/about",className:"nav-link-padding"},"O nas"),r.a.createElement(l.b,{to:"/contact",className:"nav-link-padding"},"Kontakt")),r.a.createElement("div",{className:"shopping-cart"},r.a.createElement(l.b,{to:"/cart"},r.a.createElement(f.a,null))),"LOGGED"===this.state.user.status?r.a.createElement(E.a,{alignRight:!0,title:r.a.createElement(b.a,null),className:"ml-auto"},r.a.createElement("div",{className:"dropdown-item disabled"},this.state.user.mail),r.a.createElement(E.a.Divider,null),r.a.createElement(l.b,{to:"/orders",className:"dropdown-item"},"Zamowienia"),r.a.createElement(l.b,{to:"/account",className:"dropdown-item"},"Dane konta"),r.a.createElement("div",{className:"dropdown-item",onClick:this.handleLogout},"Wyloguj")):r.a.createElement(l.b,{to:"/login"},r.a.createElement(z.a,null)))),r.a.createElement("div",{className:"navbar-underline"})))}}]),a}(r.a.Component),O=Object(c.e)(w);a(80);var j=function(){return r.a.createElement("div",null,r.a.createElement("div",{className:"footer-overline"}),r.a.createElement("div",{className:"footer-container"},r.a.createElement("div",{className:"footer-flexbox"},r.a.createElement("div",{className:"footer-copyright"},"Copyright \xa9 2020"))))},S=(a(23),a(81),function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(m.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"index-wrapper"},r.a.createElement("div",{className:"content"},r.a.createElement("div",{className:"p1"},"Najlepsza pizza w mie\u015bcie"),r.a.createElement("div",{className:"p2"},"Na serio, nie k\u0142amiemy"),r.a.createElement("div",{className:"button-wrapper"},r.a.createElement(l.b,{to:"/menu"},r.a.createElement("button",{className:"btn-primary btn-order"},"Zam\xf3w teraz")))))}}]),a}(r.a.Component)),C=(a(52),function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).state={},n.handleOrderClick=n.handleOrderClick.bind(Object(g.a)(n)),n}return Object(m.a)(a,[{key:"handleOrderClick",value:function(e){var t=JSON.parse(localStorage.getItem("cart")),a=this.props.details;"20"===e.target.id?(a.diameter=20,a.price=a.price20):(a.diameter=30,a.price=a.price30),t.standards=t.standards.concat(a),localStorage.setItem("cart",JSON.stringify(t)),this.props.handleAddingPizzaToCart(a.typeName+" ("+a.diameter+" cm)")}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:this.props.filtered?"menu-element-wrapper menu-element-wrapper--filtered":"menu-element-wrapper"},r.a.createElement("div",{className:"id-element"},this.props.index+1),r.a.createElement("div",{className:"name-element"},this.props.details.typeName),r.a.createElement("div",{className:"ingridients-element"},this.props.details.pizzaIngredients[0]?this.props.details.pizzaIngredients.map((function(t,a){return t.name+(a<e.props.details.pizzaIngredients.length-1?", ":"")})):null),r.a.createElement("div",{className:"crust-element"},this.props.details.crust),r.a.createElement("div",{className:"button-element"},r.a.createElement("button",{className:"btn-primary btn-order",id:"20",onClick:this.handleOrderClick},this.props.details.price20?this.props.details.price20.toFixed(2)+" z\u0142":"0.00 z\u0142"),r.a.createElement("button",{className:"btn-primary btn-order",id:"30",onClick:this.handleOrderClick},this.props.details.price30?this.props.details.price30.toFixed(2)+" z\u0142":"0.00 z\u0142")))}}]),a}(r.a.Component)),I=(a(82),function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this)).state={pizzas:[],ingredients:[],filters:[],message:null},n.handleFilterClick=n.handleFilterClick.bind(Object(g.a)(n)),n.handleAddingPizzaToCart=n.handleAddingPizzaToCart.bind(Object(g.a)(n)),n}return Object(m.a)(a,[{key:"fetchPizzas",value:function(){var e=this;fetch("https://pizzeria-backend-zpi.herokuapp.com/v1/pizza").then((function(e){return e.json()})).then((function(t){return e.setState({pizzas:t})})).catch((function(e){return console.log(e)}))}},{key:"fetchIngredients",value:function(){var e=this;fetch("https://pizzeria-backend-zpi.herokuapp.com/v1/ingredient").then((function(e){return e.json()})).then((function(t){return e.setState({ingredients:t})})).catch((function(e){return console.log(e)}))}},{key:"handleFilterClick",value:function(e){var t=Number(e.target.id),a=this.state.filters;a.includes(t)?this.setState({filters:a.filter((function(e){return e!==t}))}):(a.push(t),this.setState({filters:a}))}},{key:"handleAddingPizzaToCart",value:function(e){this.setState({message:"Dodano pizz\u0119 "+e+" do koszyka."})}},{key:"componentDidMount",value:function(){this.fetchIngredients(),this.fetchPizzas()}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"menu-wrapper"},r.a.createElement("div",{className:"menu-content-wrapper"},r.a.createElement("div",{className:"add-message"},this.state.message?this.state.message:null," "),r.a.createElement("div",{className:"menu-filters"},r.a.createElement("div",{className:"menu-title"},"Filtry"),r.a.createElement("div",{className:"menu-filters-buttons"},this.state.ingredients?this.state.ingredients.map((function(t){return r.a.createElement("label",{className:e.state.filters.includes(t.id)?"btn-filter btn-filter--disabled":"btn-filter",id:t.id,key:t.id,onClick:e.handleFilterClick},t.name)})):null)),r.a.createElement("div",{className:"menu-content"},r.a.createElement("div",{className:"menu-title"},"Menu"),r.a.createElement("div",{className:"menu-title-wrapper"},r.a.createElement("div",{className:"id-element"},"Lp."),r.a.createElement("div",{className:"name-element"},"Nazwa"),r.a.createElement("div",{className:"ingredients-title"},"Sk\u0142adniki"),r.a.createElement("div",{className:"crust-element"},"Ciasto"),r.a.createElement("div",{className:"button-element"},r.a.createElement("div",{className:"button-title"},"20 cm"),r.a.createElement("div",{className:"button-title"},"30 cm"))),this.state.pizzas?this.state.pizzas.map((function(t,a){return t.pizzaIngredients.some((function(t){return e.state.filters.includes(t.id)}))?r.a.createElement(C,{details:t,key:t.id,index:a,filtered:!0,handleAddingPizzaToCart:e.handleAddingPizzaToCart}):r.a.createElement(C,{details:t,key:t.id,index:a,filtered:!1,handleAddingPizzaToCart:e.handleAddingPizzaToCart})})):null),r.a.createElement("div",{className:"menu-buttons-wrapper"},r.a.createElement(l.b,{to:"/creator"},r.a.createElement("button",{className:"btn-primary btn-order"},"Utw\xf3rz w\u0142asn\u0105 pizz\u0119")),r.a.createElement(l.b,{to:"/cart"},r.a.createElement("button",{className:"btn-primary btn-order"},"Przejd\u017a do koszyka")))))}}]),a}(r.a.Component)),D=(a(83),function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(m.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"about-wrapper"},r.a.createElement("div",{className:"grid-container"},r.a.createElement("div",{className:"photo"},r.a.createElement("img",{className:"three",src:"/zpi-frontend/images/aboutThree.jpg",alt:""})),r.a.createElement("div",{className:"title"},"O nas"),r.a.createElement("div",{className:"text"},"Farfalla to prawdziwa w\u0142oska kuchnia. Lokal powsta\u0142 zar\xf3wno z pasji, jak i potrzeby, poniewa\u017c do tej pory brakowa\u0142o takiego miejsca na mapie Bydgoszczy. Nie chcieli\u015bmy stworzy\u0107 kolejnej, zwyk\u0142ej pizzerii, kt\xf3rych pe\u0142no jest w naszym mie\u015bcie i ka\u017cda oferuje niemal identyczne smaki. Zale\u017ca\u0142o nam na tym, aby do Bydgoszczy przenie\u015b\u0107 prawdziwy, w\u0142oski klimat i smaki rodem z Italii. Tak zrodzi\u0142 si\u0119 pomys\u0142 na Farfall\u0119. To, co wyr\xf3\u017cnia nas na tle konkurencji, to najwy\u017cszej jako\u015bci sk\u0142adniki, kt\xf3re pochodz\u0105 z Italii. Dzi\u0119ki temu mamy prawo nazywa\u0107 si\u0119 prawdziw\u0105, w\u0142osk\u0105 pizzeri\u0105. Niczego nie udajemy. Zapomnijcie tak\u017ce o tradycyjnych sosach do pizzy \u2013 czosnkowym lub pomidorowym. Dla W\u0142ocha by\u0142aby to prawdziwa profanacja :) Zamiast tego stawiamy na w\u0142asnej roboty oliwy smakowe, przygotowywane na bazie w\u0142oskiej oliwy Venturi. Daj\u0105 one niezwyk\u0142y aromat i smak, kt\xf3rego nie u\u015bwiadczysz w \u017cadnej innej pizzerii w Bydgoszczy. W przytulnym wn\u0119trzu Farfalli mo\u017cesz przygotowa\u0107 kameraln\u0105 imprez\u0119 rodzinn\u0105 czy firmow\u0105. Stawiamy nie tylko na smak, ale tak\u017ce niepowtarzalny klimat i go\u015bcinno\u015b\u0107. Na miejscu, na wynos, z dowozem (ju\u017c od 3 z\u0142otych). Ciesz si\u0119 smakami s\u0142onecznej Italii gdzie chcesz.")))}}]),a}(r.a.Component)),T=(a(84),function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(m.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"contact-wrapper"},r.a.createElement("div",{className:"contact-title"},"Kontakt"),r.a.createElement("div",{className:"contact-pizza-name"},"Pizzeria Farfalla  "),r.a.createElement("div",{className:"contact-address"},"ul. Kolejowa 14 ",r.a.createElement("br",null)," 53-508 Wroc\u0142aw  "),r.a.createElement("div",{className:"contact-contact"},"Numer telefonu: 887 336 885",r.a.createElement("br",null)," Adres e-mail:pizzeria@email.com "))}}]),a}(r.a.Component)),x=(a(85),function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).state={registerError:null,loginError:null},n.handleRegisterSubmit=n.handleRegisterSubmit.bind(Object(g.a)(n)),n.handleLoginSubmit=n.handleLoginSubmit.bind(Object(g.a)(n)),n}return Object(m.a)(a,[{key:"componentDidMount",value:function(){var e={status:"NOT_LOGGED"};localStorage.getItem("user")&&(e=JSON.parse(localStorage.getItem("user"))),"LOGGED"===e.status&&this.props.history.push("/")}},{key:"handleRegisterSubmit",value:function(e){var t=this;e.preventDefault(),fetch("https://pizzeria-backend-zpi.herokuapp.com/v1/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({mail:e.target[0].value,password:e.target[1].value})}).then((function(e){201===e.status?(document.getElementById("registration-form").reset(),t.props.history.push("/login?registrationRedirect=true"),t.setState({loginError:null,registerError:null})):(t.props.history.push("/login"),e.json().then((function(e){return t.setState({loginError:null,registerError:e.message})})))}))}},{key:"handleLoginSubmit",value:function(e){var t=this;e.preventDefault();var a=e.target[0].value,n=e.target[1].value;fetch("https://pizzeria-backend-zpi.herokuapp.com/v1/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({mail:a,password:n})}).then((function(e){if(200===e.status){var n={status:"LOGGED",mail:a};e.json().then((function(e){return n.token=e.token})).then((function(){return localStorage.setItem("user",JSON.stringify(n))})).then((function(){return window.location.reload(!0)}))}else t.props.history.push("/login"),e.json().then((function(e){return t.setState({loginError:e.message,registerError:null})}))}))}},{key:"render",value:function(){return r.a.createElement("div",{className:"login-subpage-wrapper"},r.a.createElement("div",{className:"forms-position-wrapper"},r.a.createElement("div",{className:"register-wrapper"},r.a.createElement("h1",null,"Rejestracja"),"?registrationRedirect=true"===this.props.location.search?r.a.createElement("div",{className:"success"},"Twoje konto zosta\u0142o utworzone. Sprawd\u017a sw\xf3j e-mail, aby potwierdzi\u0107 rejestracj\u0119."):null,this.state.registerError?r.a.createElement("div",{className:"error"}," ",this.state.registerError," "):null,r.a.createElement("form",{onSubmit:this.handleRegisterSubmit,id:"registration-form"},r.a.createElement("div",{className:"form-element"},r.a.createElement("label",null,"E-mail"),r.a.createElement("input",{type:"email",name:"email",placeholder:"Podaj sw\xf3j adres e-mail",autoComplete:"new-password"})),r.a.createElement("div",{className:"form-element"},r.a.createElement("label",null,"Has\u0142o"),r.a.createElement("input",{type:"password",name:"password",placeholder:"Podaj has\u0142o",autoComplete:"new-password"})),r.a.createElement("div",{className:"form-element"},r.a.createElement("label",null,"Powt\xf3rz has\u0142o"),r.a.createElement("input",{type:"password",name:"password2",placeholder:"Podaj has\u0142o ponownie"})),r.a.createElement("button",{type:"submit",className:"btn-primary"},"Zarejestruj"))),r.a.createElement("div",{className:"login-wrapper"},r.a.createElement("h1",null,"Logowanie"),"?logout=true"===this.props.location.search?r.a.createElement("div",{className:"success"},"Zosta\u0142e\u015b wylogowany."):null,"?emailConfirmation=true"===this.props.location.search?r.a.createElement("div",{className:"success"},"Twoje konto zosta\u0142o zweryfikowane. Teraz mo\u017cesz si\u0119 zalogowa\u0107."):null,"?unauthenticatedOrderTry=true"===this.props.location.search?r.a.createElement("div",{className:"error"},"Musisz by\u0107 zalogowany, aby z\u0142o\u017cy\u0107 zam\xf3wienie."):null,"?unauthenticatedAccessTry=true"===this.props.location.search?r.a.createElement("div",{className:"error"},"Musisz by\u0107 zalogowany, aby uzyska\u0107 dost\u0119p do tej strony."):null,this.state.loginError?r.a.createElement("div",{className:"error"}," ",this.state.loginError," "):null,r.a.createElement("form",{onSubmit:this.handleLoginSubmit,id:"login-form"},r.a.createElement("div",{className:"form-element"},r.a.createElement("label",null,"E-mail"),r.a.createElement("input",{type:"email",name:"email",placeholder:"Podaj sw\xf3j adres e-mail"})),r.a.createElement("div",{className:"form-element"},r.a.createElement("label",null,"Has\u0142o"),r.a.createElement("input",{type:"password",name:"password",placeholder:"Podaj has\u0142o"})),r.a.createElement("button",{type:"submit",className:"btn-primary"},"Zaloguj")))))}}]),a}(r.a.Component)),P=(a(86),a(102)),J=(a(87),function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(m.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"cart-element-wrapper"},r.a.createElement("div",{className:"id-element"},this.props.index+1+this.props.offset),r.a.createElement("div",{className:"name-element"},this.props.details.typeName),r.a.createElement("div",{className:"ingredients-element"},this.props.details.pizzaIngredients[0]?this.props.details.pizzaIngredients.map((function(t,a){return t.name+(a<e.props.details.pizzaIngredients.length-1?", ":"")})):null),r.a.createElement("div",{className:"type-element"},this.props.details.crust+" ("+this.props.details.diameter+" cm)"),r.a.createElement("div",{className:"button-element",onClick:function(t){return e.props.handleRemoveClick(e.props.index,e.props.type,t)},id:this.props.details.id},r.a.createElement(P.a,null)),r.a.createElement("div",{className:"price-element"},this.props.details.price?this.props.details.price.toFixed(2)+" z\u0142":"0.00 z\u0142"))}}]),a}(r.a.Component)),R=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).state={cart:JSON.parse(localStorage.getItem("cart"))},n.handleRemoveClick=n.handleRemoveClick.bind(Object(g.a)(n)),n.handleOrderClick=n.handleOrderClick.bind(Object(g.a)(n)),n}return Object(m.a)(a,[{key:"handleRemoveClick",value:function(e,t){var a=JSON.parse(localStorage.getItem("cart"));"standards"===t&&a.standards.splice(e,1),"customs"===t&&a.customs.splice(e,1),localStorage.setItem("cart",JSON.stringify(a)),this.setState({cart:JSON.parse(localStorage.getItem("cart"))})}},{key:"handleOrderClick",value:function(){localStorage.setItem("order",JSON.stringify(this.state.cart)),this.props.history.push("/order")}},{key:"render",value:function(){var e=this,t=0,a=0;return r.a.createElement("div",{className:"cart-wrapper"},r.a.createElement("div",{className:"cart-content-wrapper"},r.a.createElement("div",{className:"cart-content"},r.a.createElement("div",{className:"cart-title"},this.state.cart.standards.length+this.state.cart.customs.length>0?"Tw\xf3j koszyk":"Tw\xf3j koszyk jest pusty"," "),this.state.cart.standards?this.state.cart.standards.map((function(n,i){return a+=Number(n.price),t=i+1,r.a.createElement(J,{details:n,key:i,index:i,offset:0,type:"standards",handleRemoveClick:e.handleRemoveClick})})):null,this.state.cart.customs?this.state.cart.customs.map((function(n,i){return a+=Number(n.price),r.a.createElement(J,{details:n,key:i+t,index:i,offset:t,type:"customs",handleRemoveClick:e.handleRemoveClick})})):null,this.state.cart.standards.length+this.state.cart.customs.length>0?r.a.createElement("div",null,r.a.createElement("div",{className:"align-right-wrapper"},r.a.createElement("div",{className:"total-price"},a.toFixed(2)+" z\u0142")),r.a.createElement("div",{className:"align-right-wrapper"},r.a.createElement("button",{className:"btn-primary btn-order",onClick:this.handleOrderClick},"Utw\xf3rz zam\xf3wienie"))):null)))}}]),a}(r.a.Component),F=(a(88),a(89),function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(m.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"order-element-wrapper"},r.a.createElement("div",{className:"id-element"},this.props.index+1+this.props.offset),r.a.createElement("div",{className:"name-element"},this.props.details.typeName),r.a.createElement("div",{className:"ingredients-element"},this.props.details.pizzaIngredients[0]?this.props.details.pizzaIngredients.map((function(t,a){return t.name+(a<e.props.details.pizzaIngredients.length-1?", ":"")})):null),r.a.createElement("div",{className:"type-element"},this.props.details.crust+" ("+this.props.details.diameter+" cm)"),r.a.createElement("div",{className:"price-element"},this.props.details.price?this.props.details.price.toFixed(2)+" z\u0142":"0.00 z\u0142"))}}]),a}(r.a.Component)),L=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).state={order:JSON.parse(localStorage.getItem("order")),isOrderDone:!1,user:JSON.parse(localStorage.getItem("user"))},n.handleOrderClick=n.handleOrderClick.bind(Object(g.a)(n)),n}return Object(m.a)(a,[{key:"handleOrderClick",value:function(e){var t=this;e.preventDefault();var a=JSON.parse(localStorage.getItem("order"));a.address={street:e.target[0].value,number:e.target[1].value,phone:e.target[2].value,email:e.target[3].value},localStorage.setItem("order",JSON.stringify(a)),a.standards=a.standards.map((function(e){return{id:e.id,diameter:e.diameter}})),a.customs=a.customs.map((function(e){return{diameter:e.diameter,crust:e.crust.toUpperCase(),pizzaIngredients:e.pizzaIngredients.map((function(e){return{id:e.id,quantity:1}}))}}));var n={"Content-Type":"application/json"};JSON.parse(localStorage.getItem("user"))&&(n.Authorization="Bearer ".concat(JSON.parse(localStorage.getItem("user")).token)),fetch("https://pizzeria-backend-zpi.herokuapp.com/v1/order",{method:"POST",headers:n,body:JSON.stringify(a)}).then((function(e){200===e.status&&(t.setState({order:JSON.parse(localStorage.getItem("order")),isOrderDone:!0}),window.scrollTo(0,0),localStorage.setItem("cart",JSON.stringify({standards:[],customs:[]})),localStorage.setItem("order",JSON.stringify({standards:[],customs:[],address:{},payment:null})))}))}},{key:"render",value:function(){var e=0,t=0;return r.a.createElement("div",{className:"order-wrapper"},r.a.createElement("div",{className:"order-content-wrapper"},r.a.createElement("div",{className:"order-content"},r.a.createElement("div",{className:"order-title"},this.state.order.standards.length+this.state.order.customs.length>0?this.state.isOrderDone?"Twoje zam\xf3wienie zosta\u0142o przekazane do realizacji.":"Twoje zam\xf3wienie":"Aby utworzy\u0107 zam\xf3wienie, przejd\u017a do koszyka."," "),this.state.order.standards?this.state.order.standards.map((function(a,n){return t+=Number(a.price),e=n+1,r.a.createElement(F,{details:a,key:n,index:n,offset:0,type:"standards"})})):null,this.state.order.customs?this.state.order.customs.map((function(a,n){return a.price=0,a.pizzaIngredients.map((function(e){return a.price+=e.price})),t+=Number(a.price),r.a.createElement(F,{details:a,key:n+e,index:n,offset:e,type:"customs"})})):null,this.state.order.standards.length+this.state.order.customs.length>0?r.a.createElement("div",null,r.a.createElement("div",{className:"align-right-wrapper"},r.a.createElement("div",{className:"total-price"},t.toFixed(2)+" z\u0142")),r.a.createElement("div",{className:"form-title"},"Dane adresowe"),r.a.createElement("form",{onSubmit:this.handleOrderClick,id:"registration-form"},r.a.createElement("div",{className:"form-fields-wrapper"},r.a.createElement("div",{className:"form-element form-element--street"},r.a.createElement("label",null,"Ulica"),this.state.isOrderDone?r.a.createElement("div",{className:"order-detail"},this.state.order.address.street+" "+this.state.order.address.number):r.a.createElement("input",{type:"text",name:"street"})),this.state.isOrderDone?null:r.a.createElement("div",{className:"form-element form-element--number"},r.a.createElement("label",null,"Numer lokalu"),r.a.createElement("input",{type:"text",name:"number"})),r.a.createElement("div",{className:"form-element"},r.a.createElement("label",null,"Numer telefonu"),this.state.isOrderDone?r.a.createElement("div",{className:"order-detail"},this.state.order.address.phone):r.a.createElement("input",{type:"text",name:"phone"})),r.a.createElement("div",{className:"form-element"},r.a.createElement("label",null,"E-mail"),this.state.isOrderDone?r.a.createElement("div",{className:"order-detail"},this.state.order.address.email):r.a.createElement("input",{type:"text",name:"email",defaultValue:this.state.user?this.state.user.mail:null})),r.a.createElement("div",{className:"form-element"},r.a.createElement("label",null,"P\u0142atno\u015b\u0107"),this.state.isOrderDone?r.a.createElement("div",{className:"order-detail"},"onDelivery"===this.state.order.payment?"Przy odbiorze":"Op\u0142acono"):r.a.createElement("div",{className:"payment-radio-wrapper"},r.a.createElement("input",{type:"radio",id:"delivery",name:"gender",value:"delivery",required:!0}),r.a.createElement("label",{htmlFor:"delivery"},"Przy odbiorze"),r.a.createElement("input",{type:"radio",id:"online",name:"gender",value:"online",required:!0}),r.a.createElement("label",{htmlFor:"online"},"Online")))),r.a.createElement("div",{className:"align-right-wrapper"},this.state.isOrderDone?null:r.a.createElement("button",{type:"submit",className:"btn-primary btn-order"},"Zam\xf3w")))):null)))}}]),a}(r.a.Component),A=(a(90),function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).state={ingredients:[],pickedIngredients:[],diameter:null,crust:null,message:null},n.handleIngredientClick=n.handleIngredientClick.bind(Object(g.a)(n)),n.handleAddingPizzaToCart=n.handleAddingPizzaToCart.bind(Object(g.a)(n)),n.setRandomIngredients=n.setRandomIngredients.bind(Object(g.a)(n)),n.resetIngredients=n.resetIngredients.bind(Object(g.a)(n)),n.handleDiameterChange=n.handleDiameterChange.bind(Object(g.a)(n)),n.handleCrustChange=n.handleCrustChange.bind(Object(g.a)(n)),n}return Object(m.a)(a,[{key:"fetchIngredients",value:function(){var e=this;fetch("https://pizzeria-backend-zpi.herokuapp.com/v1/ingredient").then((function(e){return e.json()})).then((function(t){return e.setState({ingredients:t})})).catch((function(e){return console.log(e)}))}},{key:"handleIngredientClick",value:function(e){var t=Number(e.target.id),a=this.state.pickedIngredients;a.includes(t)?this.setState({pickedIngredients:a.filter((function(e){return e!==t}))}):(a.push(t),this.setState({pickedIngredients:a}))}},{key:"handleAddingPizzaToCart",value:function(e){var t=this;e.preventDefault();var a=this.state.ingredients?this.state.ingredients.map((function(e){return t.state.pickedIngredients.includes(e.id)?e:null})).filter((function(e){return e})):null,n=JSON.parse(localStorage.getItem("cart")),r={typeName:"W\u0142asna",pizzaIngredients:a,diameter:e.target[0].checked?20:30,crust:e.target[2].checked?"cienkie":"grube",price:a.map((function(e){return Number(e.price)})).reduce((function(e,t){return e+t}))};return n.customs=n.customs.concat(r),localStorage.setItem("cart",JSON.stringify(n)),this.setState({message:"Dodano pizz\u0119 do koszyka."}),!1}},{key:"componentDidMount",value:function(){this.fetchIngredients()}},{key:"setRandomIngredients",value:function(){var e=this.state.ingredients.map((function(e){return e.id})).sort((function(){return.75-Math.random()}));this.setState({pickedIngredients:e.slice(0,4)})}},{key:"resetIngredients",value:function(){this.setState({pickedIngredients:[]})}},{key:"handleDiameterChange",value:function(e){this.setState({diameter:e.currentTarget.value})}},{key:"handleCrustChange",value:function(e){this.setState({crust:e.currentTarget.value})}},{key:"render",value:function(){var e=this,t=this.state.ingredients?this.state.ingredients.map((function(t){return e.state.pickedIngredients.includes(t.id)?t:null})).filter((function(e){return e})):[];return r.a.createElement("div",{className:"pizza-creator-wrapper"},r.a.createElement("div",{className:"pizza-creator-title"},"Tworzenie w\u0142asnej pizzy"),r.a.createElement("div",{className:"add-message"},this.state.message?this.state.message:null," "),r.a.createElement("div",{className:"pizza-creator-content-wrapper"},r.a.createElement("div",{className:"left-wrapper"},r.a.createElement("form",{id:"diameter_and_crust",className:"diameter-and-crust-wrapper",onSubmit:this.handleAddingPizzaToCart},r.a.createElement("div",{className:"diameter-picker"},r.a.createElement("div",{className:"form-title"},"Rozmiar"),r.a.createElement("div",{className:"radio-wrapper"},r.a.createElement("input",{type:"radio",id:"20cm",name:"diameter",value:"20 cm",required:!0,onChange:this.handleDiameterChange}),r.a.createElement("label",{htmlFor:"delivery"},"20 cm"),r.a.createElement("input",{type:"radio",id:"30cm",name:"diameter",value:"30 cm",required:!0,onChange:this.handleDiameterChange}),r.a.createElement("label",{htmlFor:"online"},"30 cm"))),r.a.createElement("div",{className:"crust-picker"},r.a.createElement("div",{className:"form-title"},"Ciasto"),r.a.createElement("div",{className:"radio-wrapper"},r.a.createElement("input",{type:"radio",id:"thin",name:"crust",value:"cienkie",required:!0,onChange:this.handleCrustChange}),r.a.createElement("label",{htmlFor:"delivery"},"cienkie"),r.a.createElement("input",{type:"radio",id:"thick",name:"crust",value:"grube",required:!0,onChange:this.handleCrustChange}),r.a.createElement("label",{htmlFor:"online"},"grube")))),r.a.createElement("div",{className:"form-title"},"Sk\u0142adniki"),r.a.createElement("div",{className:"ingredients-buttons"},this.state.ingredients?this.state.ingredients.map((function(t){return r.a.createElement("label",{className:e.state.pickedIngredients.includes(t.id)?"btn-filter btn-filter--picked":"btn-filter",id:t.id,key:t.id,onClick:e.handleIngredientClick},t.name)})):null),r.a.createElement("button",{className:"btn-primary",onClick:this.setRandomIngredients},"Losuj sk\u0142adniki"),r.a.createElement("button",{className:"btn-primary",onClick:this.resetIngredients},"Resetuj sk\u0142adniki")),r.a.createElement("div",{className:"right-wrapper"},r.a.createElement("div",{className:"form-title"},"Podsumowanie"),this.state.diameter?r.a.createElement("div",{className:"summary-element"},"Ciasto",r.a.createElement("div",{className:"pizza-detail"},this.state.diameter)):null,this.state.crust?r.a.createElement("div",{className:"summary-element"},"Ciasto",r.a.createElement("div",{className:"pizza-detail"},this.state.crust)):null,this.state.pickedIngredients.length>0?r.a.createElement("div",{className:"summary-element"},"Sk\u0142adniki",r.a.createElement("div",{className:"pizza-detail"},t.map((function(e){return e.name})).join(", "))):null,this.state.crust&&this.state.diameter&&this.state.pickedIngredients.length>0?r.a.createElement("div",{className:"summary-element"},"Cena",r.a.createElement("div",{className:"pizza-detail"},this.state.pickedIngredients.length>0?t.map((function(e){return Number(e.price)})).reduce((function(e,t){return e+t})).toFixed(2)+" z\u0142":"0.00 z\u0142")):null),r.a.createElement("div",{className:"order-button-wrapper"},r.a.createElement("button",{type:"submit",form:"diameter_and_crust",className:"btn-primary btn-order"},"Dodaj do koszyka"))))}}]),a}(r.a.Component));a(91);var G=function(){return null!==localStorage.getItem("cart")&&(JSON.parse(localStorage.getItem("cart")).hasOwnProperty("standard")||JSON.parse(localStorage.getItem("cart")).hasOwnProperty("custom"))&&localStorage.setItem("cart",JSON.stringify({standards:[],customs:[]})),null===localStorage.getItem("cart")&&localStorage.setItem("cart",JSON.stringify({standards:[],customs:[]})),null===localStorage.getItem("order")&&localStorage.setItem("order",JSON.stringify({standards:[],customs:[],address:{}})),r.a.createElement(l.a,{basename:"/"},r.a.createElement(h,null),r.a.createElement("div",{className:"App"},r.a.createElement("div",{className:"bg"},r.a.createElement("div",{className:"wrapper"},r.a.createElement(O,null),r.a.createElement(c.a,{path:"/",exact:!0,component:S}),r.a.createElement(c.a,{path:"/menu",exact:!0,component:I}),r.a.createElement(c.a,{path:"/about",exact:!0,component:D}),r.a.createElement(c.a,{path:"/contact",exact:!0,component:T}),r.a.createElement(c.a,{path:"/login",component:x}),r.a.createElement(c.a,{path:"/cart",component:R}),r.a.createElement(c.a,{path:"/order",component:L}),r.a.createElement(c.a,{path:"/creator",component:A}))),r.a.createElement(j,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(G,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[67,1,2]]]);
//# sourceMappingURL=main.7d74ecff.chunk.js.map